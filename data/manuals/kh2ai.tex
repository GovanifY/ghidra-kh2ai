\documentclass[openany,oneside]{memoir}
\usepackage[utf8]{inputenc}
\usepackage[english]{babel}
\usepackage{blindtext}
\usepackage{fancyhdr}
\usepackage[explicit]{titlesec}
\usepackage{ifthen}
\usepackage[bookmarks=true]{hyperref}
\usepackage{bookmark}
\usepackage{xinttools}

\newcounter{bitindex}

% ISA version
\newcommand\version{v0.1}


\pagestyle{fancy}
\fancyhf{}
\fancyhead[R]{KH2Ai ISA \version}
\fancyhead[L]{Gauvain "GovanifY" Roussel-Tarbouriech}
\fancyfoot{-\thepage-}
% alternating footer
\fancyfoot[L]{\ifthenelse{\isodd{\value{page}}}{CC BY 4.0}{}}
\fancyfoot[R]{\ifthenelse{\isodd{\value{page}}}{}{CC BY 4.0}}
\renewcommand{\headrulewidth}{2pt}
\renewcommand{\footrulewidth}{1pt}

\makeatletter
\renewcommand\@seccntformat[1]{}
\makeatother

\titleformat{\chapter}[display]
  {\normalfont\bfseries}{}{0pt}{\Huge}

\newcommand{\Line}{\rule{\linewidth}{1.0mm}}
\newcommand{\Lineless}{\rule{\linewidth}{0.7mm}}
\newcommand{\Chapter}[1]{
\pagestyle{fancy}
\chapter{#1}
\begin{vplace}[0.7]
{\Huge   \null\hfill{\textbf{\thechapter.  #1}}} \\
\Line \\
\end{vplace} 
\newpage
}

\newcommand{\Main}[2]{
\begin{vplace}[0.7]
{\Huge   \null\hfill{\textbf{#1}}} \\
\Line \\
\huge \null\hfill \textbf{#2}
\end{vplace}
\newpage
}

\newcommand{\ISA}[6]{
\section{\huge #1}
\Lineless \\
\textbf{Operation Code} \\ \\
\bitpicture {0}{10000000}{10010010000111111010000} \\ \\
\textbf{Format} \\ 
\hspace*{0.5cm} #2 \\ \\
\textbf{Description} \\ 
\hspace*{0.5cm} #3  \\ \\
\textbf{Exceptions} \\ 
\hspace*{0.5cm} #4 \\ \\
\textbf{Operations} \\ 
\hspace*{0.5cm} #5 \\ \\
\textbf{Programming notes} \\ 
\hspace*{0.5cm} #6 \\ \\
\newpage
}

\newcommand\bitpicture [3]{%
  \setlength{\unitlength}{0.9mm}
  \setlength{\fboxsep}{0mm}
  \begin{picture}(130,16)
    % sign bit
  \put(2,4){\framebox(4,8){#1}}
  % exponent
  \setcounter{bitindex}{1}%
  \xintFor* ##1 in {#2}
  \do
  {\put(\numexpr 2+4*\value{bitindex},4){\framebox(4,8){##1}}%
   \stepcounter{bitindex}}%
  % fraction
  \setcounter{bitindex}{1}%
  \xintFor* ##1 in {#3}
  \do
  {\put(\numexpr 34+4*\value{bitindex},4){\framebox(4,8){##1}}%
   \stepcounter{bitindex}}%
  % upper labels
  \put(0,14){\scriptsize{MSB}}
  \put(126,14){\scriptsize{LSB}}
  %lower labels
  \put(3,0){\scriptsize{S}}
  \put(7,0){\line(0,1){2}}
  \put(7,1){\vector(1,0){8}}
  \put(16,0){\scriptsize{Exponent}}
  \put(37,1){\vector(-1,0){8}}
  \put(37,0){\line(0,1){2}}
  \put(39,0){\line(0,1){2}}
  \put(39,1){\vector(1,0){38}}
  \put(79,0){\scriptsize{Fraction}}
  \put(130,1){\vector(-1,0){38}}
  \put(130,0){\line(0,1){2}}
\end{picture}%
}


% other preamble stuff...
\usepackage{etoolbox}
\patchcmd{\chapter}{\thispagestyle{plain}}{\thispagestyle{fancy}}{}{}

\begin{document}

\Main{Kh2Ai ISA}{\version}


\Chapter{Notational Convention}


\section{New section}

\Blindtext
\Blindtext

\Chapter{Instruction Set}

\ISA{PUSH: Push}{b}{c}{d}{e}{f}

\ISA{PUSHA: Push and Add}{b}{c}{d}{e}{f}

\ISA{PUSHAP: Push and Add to Pointer}{b}{c}{d}{e}{f}

\ISA{POP: pop}{b}{c}{d}{e}{f}

\ISA{CFTI: Convert Float To Int}{b}{c}{d}{e}{f}

\ISA{NEG: convert to NEGative signed number}{b}{c}{d}{e}{f}

\ISA{INV: INVert an unsigned value}{b}{c}{d}{e}{f}

\ISA{EQZ: conditional is EQual Zero}{b}{c}{d}{e}{f}

\ISA{ABS: convert to ABSolute value}{b}{c}{d}{e}{f}

\ISA{MSB: return Most Significant Bit}{b}{c}{d}{e}{f}

\ISA{INFO: conditional INFerior to One}{b}{c}{d}{e}{f}

\ISA{NEQZ: conditional Not Equal to Zero}{b}{c}{d}{e}{f}

\ISA{MSB: return Most Significant Bit Inverted}{b}{c}{d}{e}{f}

\ISA{IPOS: Conditional Is POSitive}{b}{c}{d}{e}{f}

\ISA{CITF: Convert Int To Float}{b}{c}{d}{e}{f}

\ISA{NEGF: convert to NEGative Float}{b}{c}{d}{e}{f}

\ISA{ABS: convert to ABSolute Float}{b}{c}{d}{e}{f}

\ISA{INFZF: Conditional INFerior to Zero Float}{b}{c}{d}{e}{f}

\ISA{INFOEZF: Conditional INFerior Or Equal to Zero Float}{b}{c}{d}{e}{f}

\ISA{EQZF: conditional is EQual Zero Float}{b}{c}{d}{e}{f}

\ISA{NEQZF: conditional Not Equal to Zero Float}{b}{c}{d}{e}{f}

\ISA{SUPOEZF: conditional SUPerior Or Equal to Zero Float}{b}{c}{d}{e}{f}

\ISA{SUPZF: conditional SUPerior to Zero Float}{b}{c}{d}{e}{f}

\ISA{ADD: ADDition}{b}{c}{d}{e}{f}

\ISA{SUB: SUBstraction}{b}{c}{d}{e}{f}

\ISA{MUL: MULtiplication}{b}{c}{d}{e}{f}

\ISA{DIV: DIVision}{b}{c}{d}{e}{f}

\ISA{MOD: MODulo}{b}{c}{d}{e}{f}

\ISA{AND: logical AND}{b}{c}{d}{e}{f}

\ISA{OR: logical OR}{b}{c}{d}{e}{f}

\ISA{XOR: logical eXclusive OR}{b}{c}{d}{e}{f}

\ISA{SLL: Shift Logical Left}{b}{c}{d}{e}{f}

\ISA{SRA: Shift Right Arithmetic}{b}{c}{d}{e}{f}

\ISA{NEQZV: conditional Not EQual to Zero with stack Values}{b}{c}{d}{e}{f}

\ISA{EQZV: conditional EQual to Zero with stack Values}{b}{c}{d}{e}{f}

\ISA{ADDF: ADDition with Float values}{b}{c}{d}{e}{f}

\ISA{SUBF: SUBstraction with Float values}{b}{c}{d}{e}{f}

\ISA{MULF: MULtiplication with Float values}{b}{c}{d}{e}{f}

\ISA{DIVF: DIVision with Float values}{b}{c}{d}{e}{f}

\ISA{MODF: MODulo with Float values}{b}{c}{d}{e}{f}

\ISA{JMP: JuMP}{b}{c}{d}{e}{f}

\ISA{EXIT: EXIT}{b}{c}{d}{e}{f}

\ISA{RET: RETurn}{b}{c}{d}{e}{f}

\ISA{PUSHCA: PUSH CAched value}{b}{c}{d}{e}{f}

\ISA{PUSHC: PUSH Copy}{b}{c}{d}{e}{f}

\ISA{SIN: SINus}{b}{c}{d}{e}{f}

\ISA{COS: COSinus}{b}{c}{d}{e}{f}

\ISA{DEGR: DEGrees to Radians}{b}{c}{d}{e}{f}

\ISA{RADD: RADians to Degrees}{b}{c}{d}{e}{f}

\ISA{SYSCALL: SYStem CALL}{b}{c}{d}{e}{f}

\end{document}
